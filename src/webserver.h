#define ROOT_PAGE "<html>  <head>    <script>      var socket;      function init() {        socket = new WebSocket(\"ws://\" + window.location.hostname + \":81/\");        socket.onmessage = function(event) {          var s = \"\";          var d = new Date().getTime();          event.data.split(\"\\n\").forEach(function(line) {            var p = line.indexOf(\",\");            if (p == -1) {              return;            }            var ms = parseInt(line.substr(0,p));            var txt = line.substr(p + 1);            var d1 = new Date(d - ms);            s += d1.toLocaleString() + \" - \" + txt + \"\\n\";          });          preLogViewer.innerText = s;        };        socket.onclose = function(e) {          var d = new Date();          preLogViewer.innerText = d.toLocaleString() +  \" - Socket is closed. Reconnect will be attempted in 1 second.\"  +  e.reason;          setTimeout(function() {            init();          }, 1000);        };        socket.onerror = function(err) {          preLogViewer.innerText = \"Socket encountered error: \" +  err.message;          socket.close();        };              }    </script>    <style>    body    {      padding: 0;      margin: 0;    }    h1 {      font-size: 2em;      color: #847bf7;      text-transform: uppercase;      font-weight: normal;      line-height: 1;      text-align: center;      margin: 0px 50px 0 50px;      padding-top: -60px;    }    #preLogViewer {      border: 1px black dotted;      background-color: black;      width: 80%;      margin: auto;      padding: 1em;      height: 60em;      overflow: auto;      font-weight: bold;      color: yellow;    }    .footer {      position: fixed;      left: 0;      bottom: 0;      width: 100%;      background-color: #EFEFEF;      color: black;      font-size: small;      text-align: center;    }    a {      text-decoration: none;    }    </style>    <title>Stairway Controller</title>  </head>  <body onload=\"init()\">    <h1 id=\"mainHeader\">Stairway Controller</h1>    <pre id=\"preLogViewer\"></pre>    <div class=\"footer\">created by Roey Benamotz. <a href=\"mailto:roey@benamotz.com\">roey@benamotz.com</a><div>  </body></html>"

void setupWebServer();
void loopWebServer();

